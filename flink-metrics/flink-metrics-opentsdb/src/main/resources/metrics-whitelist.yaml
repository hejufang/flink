#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#

# Set root logger level to OFF to not flood build logs
# set manually to INFO for debugging purposes

global:
  name:
    [
        numRestarts,
        numOfRestartsAggrByBackoffTime,
        numOfFailFilteredByAggregatedStrategy,
        fullRestarts,
        fullRestartsRate,
        downtime,
        jobVersion,
        uptime,
        restartingTime,
        executionStateTime,
        taskFailingTime,
        executionFailNum,
        executionFailNumRate,
        executionStatus,
        noResourceAvailableException,
        currentOffsetsRate,
        consumerRecordsRate,
        numberOfFailedCheckpoints,
        totalNumberOfCheckpoints,
        numberOfSpeculation,
        numberOfSuccessfulSpeculation,
        numberOfRecoverableJobs,
        numberOfTaskRecoveries,
        numberOfGlobalFailures,
        numberOfRegionCheckpointJobs,
        numberOfRegionCheckpoints,
        numberOfRegionCheckpointRecoveries,
        connectSuccessRetryTimes,
        connectFailRetryTimes,
        numberOfActualDeletedStateFiles,
        numberOfTotalDeletedStateFiles,
        barrierAlignDuration,
        contentionLockDuration,
        checkpointWriteFileRate,
        checkpointWriteFileLatency,
        checkpointCloseFileLatency,
        preJobRawTotalStateSize,
        postJobRawTotalStateSize,
        numPatternsAdded,
        numPatternsDropped,
        numPatternsUsed,
        numChannelsUpdatedByJM,
        numChannelsUpdatedByTask,
        numChannelsInjectedError,
        numberOfHdfsRetries,
        numberOfScaleUp,
        numberOfScaleDown,
        cacheMinRemainedCapacity,
        cacheTotalRemainedCapacity,
        nettyShuffleOutputBytes,
        nettyShuffleInputBytes,
        cloudShuffleOutputBytes,
        cloudShuffleInputBytes,
        allocateFromAvailableFailedNumber,
        numberOfDiscardExpiredCheckpointFolder,
        numJobRequiredWorkers,
        numberOfRecoverSuccess,
        numberOfRecoverFailed,
        numberOfCheckpointPlaceholderTransformed,
        numberOfTmExceedQuota,
        numberOfFailedDiscardExpiredCheckpointFolder
    ]

non-global:
  substring:
    [
        rocksdb
    ]
  name:
    [
      # job info
        downtime,
        uptime,
        numRestarts,
        fullRestarts,
        numOfRestartsAggrByBackoffTime,
        executionFailNum,
        executionStatus,
        restartingTime,
        noResourceAvailableException,
        numRunningJobs,
      # TaskManager / Slot
        numRegisteredTaskManagers,
        numPendingTaskManagerSlots,
        numPendingSlotRequests,
        taskSlotsTotal,
        taskSlotsAvailable,
        numLackSlots,
        numExcessWorkers,
        numLackWorkers,
      # Memory
        Used,
        Committed,
        Max,
        Total,
      # GC
        Count,
        Time,
      # Task In/Out Queue
        inputQueueLength,
        outputQueueLength,
      # Task In/Out Pool Usage
        inPoolUsage,
        outPoolUsage,
      # Task InputChannels number
        numberOfInputChannels,
      # In/Out Record Number
        numRecordsInPerSecond,
        numRecordsOutPerSecond,
        numRecordsDropped,
        numBuffersInDropped,
        numChannelsUpdatedByJM,
        numChannelsUpdatedByTask,
        numChannelsInjectedError,
        numChannelsCached,
      # late Records Dropped
        numLateRecordsDropped,
      # Lookup Table Metrics
        hitRate,
        lookupRequestPerSecond,
        lookupFailurePerSecond,
        lookupRequestDelay,
      # latency
        latency,
      # kafka offset
        currentOffsets,
        commit-rate,
      # kafka latency
        fetch-latency-avg,
        fetch-latency-max,
        min-fetch-latency-avg,
        min-fetch-latency-max,
      # kafka poll interval
        poll_interval,
      # Network Memory
        TotalMemorySegments,
        AllocatedMemorySegments,
        UsedMemorySegments,
        AvailableMemorySegments,
        TotalMemory,
        AllocatedMemory,
        UsedMemory,
        AvailableMemory,
      # speuclation
        numberOfSpeculation,
        numberOfSuccessfulSpeculation,
      # CPU
        Load,
        Cores,
      # Checkpoints
        numberOfContinuousCheckpointFailure,
        numberOfTriggerFailedCheckpoints,
        lastCheckpointDuration,
        numberOfFailedCheckpoints,
        totalNumberOfCheckpoints,
        syncDuration,
        asyncDuration,
        barrierAlignDuration,
        contentionLockDuration,
        lastCheckpointSize,
        lastCheckpointTotalSize,
      # operator snapshot
        syncDuration,
        uploadDuration,
        uploadSizeInBytes,
        preRawTotalStateSize,
        postRawTotalStateSize,
        preSstFileNum,
        postSstFileNum,
        preUploadFileNum,
        postUploadFileNum,
      # operator restore
        stateRecoverTime,
        downloadDuration,
        writeKeyDuration,
        downloadSizeInBytes,
        numberOfRecoverSuccess,
        numberOfRecoverFailed,
      # Timer
        processingTimerTriggerCount,
        processingTimerLatencyMax,
        processingTimerLatencyMin,
      # Blacklist
        numTaskManagersInBlacklist,
        criticalErrorNum,
      # number of skipped records in source
        skipDirty,
      # number of write failed in sink
        writeFailed,
      # yarn containers
        allocatedContainerNum,
        allocatedCPU,
        allocatedMemory,
        pendingCPU,
        pendingMemory,
        startingContainers,
        pendingRequestedContainerNum,
        slowContainerNum,
        totalRedundantContainerNum,
        pendingRedundantContainerNum,
        startingRedundantContainerNum,
        containerStartDurationMaxMs,
        speculativeSlowContainerTimeoutMs,
      # gang
        gangFailedNum,
        gangDowngradeNum,
      # recoverable individual failover
        numberOfTaskRecoveries,
        numberOfGlobalFailures,
        numberOfRecoverableJobs,
        blackedHost,
        completedContainer,
      # container descheduler
        descheduledContainers,
        deschedulerReceivedInfo,
        deschedulerHandleResult,
        deschedulerDurationMs,
      # lookup join null count
        asyncLookupNullCounter,
        lookUpNullCounter,
      # sql gateway, use above latency
        gateway_throughput,
        session_count,
        job_count,
        result_count,
        query_phase_latency,
      # sink log-failures count
        writeFailed,
      # interval-join left && right side dropped
        numLeftSideRecordsDropped,
        numRightSideRecordsDropped,
      # interval-join left && right side expire dropped
        numLeftExpireRecordsDropped,
        numRightExpireRecordsDropped,
      # jm threadPool usage
        numPendingIOTask,
        numRunningIOTask,
        ioThreadPoolUsage,
        numPendingFutureTask,
        numRunningFutureTask,
        futureThreadPoolUsage,
      # state
        stateAverageKeySize,
        stateAverageValueSize,
        stateMaxKeySize,
        stateMaxValueSize,
        stateAverageOpLatency,
        stateMaxOpLatency,
        stateAverageOpRate,
        stateTotalSize,
        stateMetricsOfCompactionFlush,
        localStateSize,
      # cep
        numLateRecordsDropped,
        numLateRecordsOutput,
        numStateCleanerTriggered,
        numMatchedSequences,
        numUnMatchedSequences,
        numTimeOutSequences,
        advanceTimeDuration,
        processEventDuration,
        processMatchedDuration,
        processUnMatchDuration,
        processTimeoutDuration,
      # cache
        cacheStats,
      # tm
        taskExecutorExecutionStateTime,
        numberOfTasks,
        taskFailingTime,
      # heartbeat
        RMHeartbeatTimeoutFromJM,
        RMHeartbeatTimeoutFromTM,
        JMHeartbeatTimeoutFromRM,
        JMHeartbeatTimeoutFromTM,
        TMHeartbeatTimeoutFromRM,
        TMHeartbeatTimeoutFromJM,
      # am
        timeOfAMStart
    ]

report-during-unregister:
  name:
    [
        numberOfHdfsRetries,
        numberOfRecoverSuccess,
        numberOfRecoverFailed
    ]
