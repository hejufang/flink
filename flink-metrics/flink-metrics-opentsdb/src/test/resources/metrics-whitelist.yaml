#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#

# Set root logger level to OFF to not flood build logs
# set manually to INFO for debugging purposes

global:
  name:
    [
        fullRestarts,
        noResourceAvailableException,
        currentOffsetsRate,
        numberOfFailedCheckpoints,
        totalNumberOfCheckpoints,
        numberOfSpeculation,
        numberOfSuccessfulSpeculation,
        numberOfRecoverableJobs,
        numberOfTaskRecoveries,
        numberOfGlobalFailures,
        numberOfRegionCheckpointJobs,
        numberOfRegionCheckpoints,
        numberOfRegionCheckpointRecoveries,
        checkpointWriteFileRate,
        checkpointWriteFileLatency,
        checkpointCloseFileLatency
    ]

non-global:
  substring:
    [
        state.backend.rocksdb.metrics
    ]
  name:
    [
      # job info
        downtime,
        fullRestarts,
        restartingTime,
        noResourceAvailableException,
      # TaskManager / Slot
        numRegisteredTaskManagers,
        taskSlotsTotal,
        taskSlotsAvailable,
      # Memory
        Used,
        Committed,
        Max,
      # GC
        Count,
        Time,
      # Task In/Out Queue
        inputQueueLength,
        outputQueueLength,
      # Task In/Out Pool Usage
        inPoolUsage,
        outPoolUsage,
      # In/Out Record Number
        numRecordsInPerSecond,
        numRecordsOutPerSecond,
        numRecordsDropped,
      # late Records Dropped
        numLateRecordsDropped,
      # hitRate for dimension tables
        hitRate,
      # latency
        latency,
      # kafka offset
        currentOffsets,
        commit-rate,
      # kafka latency
        fetch-latency-avg,
        fetch-latency-max,
      # Network Memory
        TotalMemorySegments,
        AvailableMemorySegments,
        AllocatedMemorySegments,
      # speuclation
        numberOfSpeculation,
        numberOfSuccessfulSpeculation,
      # CPU
        Load,
      # Checkpoints
        numberOfTriggerFailedCheckpoints,
        lastCheckpointDuration,
        numberOfFailedCheckpoints,
        totalNumberOfCheckpoints,
        syncDuration,
        asyncDuration,
        lastCheckpointSize,
        lastCheckpointTotalSize,
      # operator snapshot
        syncDurationInMs,
        uploadDurationInMs,
        uploadSizeInBytes,
      # operator restore
        stateRecoverTime,
        downloadDurationInMs,
        writeKeyDurationInMs,
        downloadSizeInBytes,
      # Blacklist
        numTaskManagersInBlacklist,
      # number of skipped records in source
        skipDirty,
      # number of write failed in sink
        writeFailed,
      # slow containers
        releasedSlowContainers,
        slowContainers,
        containerStartDurationMaxMs,
      # recoverable individual failover
        numberOfTaskRecoveries,
        numberOfGlobalFailures,
        numberOfRecoverableJobs,
        blackedHost,
        completedContainer,
      # container descheduler
        descheduledContainers,
        deschedulerReceivedInfo,
        deschedulerHandleResult,
        deschedulerDurationMs,
      # jm threadPool usage
        numPendingIOTask,
        numRunningIOTask,
        ioThreadPoolUsage,
        numPendingFutureTask,
        numRunningFutureTask,
        futureThreadPoolUsage,
      # state
        stateAverageKeySize,
        stateAverageValueSize,
        stateMaxKeySize,
        stateMaxValueSize
    ]
